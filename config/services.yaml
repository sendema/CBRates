# config/services.yaml
parameters:
    redis_dsn: '%env(REDIS_URL)%'

services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'

    redis.client:
        class: Redis
        calls:
            - connect: ['redis', 6379]
        public: true

    App\Service\RedisCacheService:
        public: true
        arguments:
            $redis: '@redis.client'

    App\Service\CBRService:
        arguments:
            $logger: '@monolog.logger'